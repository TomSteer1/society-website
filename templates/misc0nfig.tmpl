{{ define "head" }}
{{ end }}
{{define "content"}}
<section>
	<div class="container misc0grad" id="mainHeaderMisc">
		<img src="/images/misc0nfig_banner_transparent.png" alt="misc0nfig"	class="headerImage" loading="eager" id="misc0nfigLogo"/>
		<p>
		misc0nfig is the annual Warwick Cyber Security Society conference, started in 2025! We host a series of talks and workshops for all levels of cyber knowledge.
        </p>

	</div>
</section>
<section class="bg">
<h1 id="announcement">You can book your tickets for 2025 <a href="https://www.warwicksu.com/venues-events/events/61481/26830/">here!</a></h1>
</section>
<section class="alt-bg">
	<div class="container" id="Sponsors">
	<h2 class="subTitle" id="Sponsors">Conference Sponsors</h2>
	<div class="sponsorContainer clickable">
	{{ range .ConfSponsors }}
		<div class="sponsor" onclick="openSponsors()">
			<img src="{{.Image}}" class="image" />
		</div>
	{{end}}
	</div>
	</div>
</section>
<section>
{{ $roomOccupancy := dict }}
{{ range .Rooms }}
  {{ $roomOccupancy = merge $roomOccupancy (dict . 0) }}
{{ end }}

<table>
  <thead>
    <tr>
      <th>Time</th>
      {{ range .Rooms }}
        <th>{{ . }}</th>
      {{ end }}
    </tr>
  </thead>
  <tbody>
    {{ range $i, $timeslot := .Timeslots }}
      <tr>
        <td>{{ $timeslot }}</td>
        {{ range $.Rooms }}
          {{ $room := . }}
          
          {{/* Check if room is occupied by rowspan from earlier event */}}
          {{ $occupancy := index $roomOccupancy $room }}
          
          {{ if gt $occupancy 0 }}
            {{/* Skip rendering a <td> because this timeslot is already covered */}}
            {{ $roomOccupancy = merge $roomOccupancy (dict $room (sub $occupancy 1)) }}
          {{ else }}
            {{/* Look for a new event starting now at this room */}}
            {{ $event := "" }}
            {{ range $.Schedule }}
              {{ if and (eq .Room $room) (eq .Start $timeslot) }}
                {{ $event = . }}
              {{ end }}
            {{ end }}

            {{ if $event }}
              {{/* Calculate rowspan for this event based on how many timeslots it covers */}}
              {{ $rowspan := 1 }}
              {{ range $.Timeslots }}
                {{ if and (gt . $timeslot) (lt . $event.End) }}
                  {{ $rowspan = add $rowspan 1 }}
                {{ end }}
              {{ end }}
              {{/* Set occupancy counter so we skip this many next rows */}}
              {{ $roomOccupancy = merge $roomOccupancy (dict $room (sub $rowspan 1)) }}

              <td rowspan="{{ $rowspan }}">
                <strong>{{ $event.Title }}</strong><br><small>{{ $event.Speaker }}</small>
              </td>
            {{ else }}
              {{/* No event starting and not occupied: render empty cell */}}
              <td></td>
            {{ end }}
          {{ end }}
          
        {{ end }}
      </tr>
    {{ end }}
  </tbody>
</table>

</section>

{{end}}